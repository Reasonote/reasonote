---------------------------------------------------------------------------
-- 
-- ⚠️ DO NOT EDIT THIS FILE!
-- THIS FILE WAS AUTOMATICALLY GENERATED FROM THE CONTENTS OF A CLEANLY-MIGRATED DATABASE.
-- 
-- ℹ️ To change the contents of this file, create a new migration under 'supabase/migrations/'
-- that makes the change you would like to see.
-- 
---------------------------------------------------------------------------
-- Function: public.tgr_handle_new_user

---------------------------------------------------------------------------
-- BEGIN: PG_DUMP RESULT (FUNCTION: public.tgr_handle_new_user)
------------------------------
CREATE OR REPLACE FUNCTION public.tgr_handle_new_user()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public'
AS $function$
begin
    -- Insert a row into public.rsn_user
    -- Setting the auth_id to the new user's id and including name fields
    insert into public.rsn_user (auth_id, given_name, family_name)
        values (new.id, new.raw_user_meta_data->>'given_name', new.raw_user_meta_data->>'family_name');

    insert into public.rsn_user_sysdata (auth_id)
        values (new.id);

    -- Return the auth user row
    return new;
end;
$function$



------------------------------
-- END: PG_DUMP RESULT (FUNCTION: public.tgr_handle_new_user)
---------------------------------------------------------------------------
