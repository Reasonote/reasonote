---------------------------------------------------------------------------
-- 
-- ⚠️ DO NOT EDIT THIS FILE!
-- THIS FILE WAS AUTOMATICALLY GENERATED FROM THE CONTENTS OF A CLEANLY-MIGRATED DATABASE.
-- 
-- ℹ️ To change the contents of this file, create a new migration under 'supabase/migrations/'
-- that makes the change you would like to see.
-- 
---------------------------------------------------------------------------
-- Function: public.get_activities_for_skill_paths

---------------------------------------------------------------------------
-- BEGIN: PG_DUMP RESULT (FUNCTION: public.get_activities_for_skill_paths)
------------------------------
CREATE OR REPLACE FUNCTION public.get_activities_for_skill_paths(p_skill_paths jsonb, p_generated_for_user text DEFAULT NULL::text, p_activity_type text DEFAULT NULL::text)
 RETURNS SETOF activity
 LANGUAGE sql
 STABLE
AS $function$
  SELECT a.*
  FROM activity a
  WHERE (p_generated_for_user IS NULL OR a.generated_for_user = p_generated_for_user)
  AND (p_activity_type IS NULL OR a._type = p_activity_type)
  AND EXISTS (
    SELECT 1
    FROM jsonb_array_elements(a.generated_for_skill_paths) AS elem,
         jsonb_array_elements(p_skill_paths) AS input(sp)
    WHERE elem = input.sp
  );
$function$



------------------------------
-- END: PG_DUMP RESULT (FUNCTION: public.get_activities_for_skill_paths)
---------------------------------------------------------------------------
