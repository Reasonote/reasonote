---------------------------------------------------------------------------
-- 
-- ⚠️ DO NOT EDIT THIS FILE!
-- THIS FILE WAS AUTOMATICALLY GENERATED FROM THE CONTENTS OF A CLEANLY-MIGRATED DATABASE.
-- 
-- ℹ️ To change the contents of this file, create a new migration under 'supabase/migrations/'
-- that makes the change you would like to see.
-- 
---------------------------------------------------------------------------
-- Function: public.json_diff_values

---------------------------------------------------------------------------
-- BEGIN: PG_DUMP RESULT (FUNCTION: public.json_diff_values)
------------------------------
CREATE OR REPLACE FUNCTION public.json_diff_values(val1 json, val2 json)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
    DECLARE
      result JSONB;
      v RECORD;
    BEGIN
       result = val1;
       FOR v IN SELECT * FROM json_each(val2) LOOP
         IF result @> jsonb_build_object(v.key,v.value)
            THEN result = result - v.key;
         ELSIF result ? v.key THEN CONTINUE;
         ELSE
            result = result || jsonb_build_object(v.key,'null');
         END IF;
       END LOOP;
       RETURN result;
    END;
$function$



------------------------------
-- END: PG_DUMP RESULT (FUNCTION: public.json_diff_values)
---------------------------------------------------------------------------
